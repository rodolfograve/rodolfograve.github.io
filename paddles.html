<!DOCTYPE html>
<html>
    <head>
        <title>Paddles - reference</title>
    </head>
    <body>
        <canvas id="board" width="800" height="500" />
        <script>
            class Paddle {
                constructor(x, y, width, height) {
                    this.x = x;
                    this.y = y;
                    this.width = width;
                    this.height = height;
                }

                render(ctx) {
                    ctx.fillStyle = "white";
                    ctx.fillRect(this.x, this.y, this.width, this.height);
                }

                hasHitBall(ball) {
                    return ball.x > this.x && ball.x < this.x + this.width;
                }

            }
            class Speed {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                }
                reverseX() {
                    this.x *= -1;
                }
                reverseY() {
                    this.y *= -1;
                }
            }
            class Ball {
                constructor (x, y) {
                    this.x = x;
                    this.y = y;
                    this.radius = 3;
                    this.speed = new Speed(5, 0);
                }
                render(ctx) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI, false);
                    ctx.fillStyle = "white";
                    ctx.fill();
                }
                move() {
                    this.x += this.speed.x;
                    this.y += this.speed.y;
                }
                update(paddle1, paddle2) {
                    if (paddle1.hasHitBall(this) || paddle2.hasHitBall(this)) {
                        this.reverseX();
                    }
                    this.move();
                }
                reverseX() {
                    this.speed.reverseX();
                }
            }
            class Game {
                constructor(ctx) {
                    this.ctx = ctx;

                    this.width = 800;
                    this.height = 500;
                    this.paddleWidth = 20;
                    this.paddleHeight = 100;

                    this.player = new Paddle(5, 200, this.paddleWidth, this.paddleHeight);
                    this.ai = new Paddle(this.width - this.paddleWidth - 5, 200, this.paddleWidth, this.paddleHeight);
                    this.ball = new Ball(this.width / 2, this.height / 2, this.paddleWidth, this.paddleHeight);
                }

                tick() {
                    this.update();
                    this.draw();
                    window.setTimeout("game.tick()", 1000/60);
                }
                update() {
                    this.ball.update(this.player, this.ai);
                    // player.update();
                    // ai.update();    
                }
                draw() {
                    this.ctx.fillStyle = "black";
                    this.ctx.fillRect(0, 0, 800, 600);
                    this.player.render(ctx);
                    this.ai.render(ctx);
                    this.ball.render(ctx);
                }
                start() {
                    this.tick();
                }
            }

            var board = document.getElementById("board");
            var ctx = board.getContext("2d");
            var game = new Game(ctx);
            game.start();
        </script>
    </body>
</html>